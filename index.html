<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Digitales Cashflow‚ÄëTool</title>  <style>    :root {
      --bg: #f5f7fa;
      --surface: #ffffff;
      --primary: #2a9d8f;
      --secondary: #264653;
      --accent: #e9c46a;
      --text: #333333;
      --border: #dddddd;
      --danger: #e76f51;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      padding: 0.5rem;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    input, select {
      font-size: 1rem;
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 0.5rem;
      transition: box-shadow 0.3s ease, border-color 0.3s ease;
    }
    input:focus, select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 5px rgba(42,157,143,0.5);
      outline: none;
    }

    .profile-selector-container {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      z-index: 10;
    }
    
    .profile-selection {
      background: var(--surface);
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border-radius: 8px;
      padding: 0.5rem;
      display: flex;
      align-items: center;
    }
    
    .profile-selection select {
      margin-left: 0.5rem;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      flex: 1;
      overflow: auto;
      padding-top: 2.5rem;
    }    .sheet {
      flex: 1 1 320px;
      background: var(--surface);
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 1rem;
      height: 100%;
      overflow-y: auto;
      max-height: calc(100vh - 3.5rem);
    }
    .sheet:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    h2 {
      color: var(--primary);
      margin-bottom: 0.75rem;
      font-size: 1.2rem;
    }

    section + section {
      margin-top: 1rem;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }    .grid3 {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 0.5rem;
      margin: 0.5rem 0;
      font-size: 0.95rem;
    }

    .grid4 {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 0.5rem;
      margin: 0.5rem 0;
      font-size: 0.95rem;
    }
    
    .liability-control {
      display: flex;
      gap: 0.5rem;
    }
      .bank-loan-control {
      display: flex;
      gap: 0.4rem;
    }
    
    .bank-controls {
      display: flex;
      gap: 0.2rem;
    }
    
    .bank-controls button {
      padding: 0.4rem;
      min-width: 50px;
      font-size: 0.8rem;
    }.summary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #ffffff;
      border-radius: 8px;
      padding: 0.75rem;
      margin-bottom: 0.75rem;
      font-size: 0.9rem;
    }

    .summary label {
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.4rem;
    }

    .balance {
      font-weight: bold;
      text-align: center;
      margin-bottom: 0.75rem;
      font-size: 1.1rem;
    }    #entries li {
      display: flex;
      margin-bottom: 0.4rem;
      opacity: 0;
      animation: fadeIn 0.4s ease-out forwards;
    }    
    
    #entries input {
      flex: 1;
      padding: 0.4rem;
      border-radius: 4px;
      font-size: 0.95rem;
    }

    button {
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 0.4rem 0.6rem;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.2s;
      font-size: 0.9rem;
    }
      button:hover:not(:disabled) {
      background-color: #238a7e;
    }
    
    button:active:not(:disabled) {
      transform: translateY(1px);
    }
    
    button:disabled {
      background-color: #cccccc;
      color: #888888;
      cursor: not-allowed;
    }
    
    button.btn-disabled {
      opacity: 0.7;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-3px); }
      to   { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>  <div class="profile-selector-container">
    <div class="profile-selection">
      <label for="profile-selector">Profil:</label>
      <select id="profile-selector">
        <option value="debug-anwalt">üêû Debug Anwalt</option>
        <option value="anwalt">‚öñÔ∏è Anwalt</option>
        <option value="arzt">ü©∫ Arzt</option>
        <option value="hausmeister">üè† Hausmeister</option>
        <option value="ingenieur">üë∑ Ingenieur</option>
        <option value="krankenschwester">üè• Krankenschwester</option>
        <option value="lehrer">üìö Lehrer</option>
        <option value="lkw-fahrer">üöö LKW‚ÄëFahrer</option>
        <option value="manager">üíº Manager</option>
        <option value="mechaniker">üîß Mechaniker</option>
        <option value="pilot">‚úàÔ∏è Pilot</option>
        <option value="polizist">üëÆ Polizist</option>
        <option value="sekretaer">üóÇÔ∏è Sekret√§r</option>
      </select>
    </div>
  </div>
  <div class="container">
    <div class="sheet">
      <section><h2>1) Einkommen</h2>
        <label>Gehalt:<input id="input-income-salary" type="number" readonly></label>
        <label>Zinsen/Dividenden:<input id="input-income-interest" type="number"></label>
        <label>Immobilien/Unternehmen:<input id="input-income-property" type="number"></label>
      </section>      <section><h2>2) Ausgaben</h2>
        <label>Steuern:<input id="input-expenses-taxes" type="number" readonly></label>
        <label>Eigenheim‚ÄëHypothek:<input id="input-expenses-mortgage" type="number" readonly></label>
        <label>BAf√∂G Darlehenszahlung:<input id="input-expenses-bafog" type="number" readonly></label>
        <label>Autokredit‚ÄëZahlung:<input id="input-expenses-autoloan" type="number" readonly></label>
        <label>Kreditkarten‚ÄëZahlung:<input id="input-expenses-cc" type="number" readonly></label>
        <label>Bankkredit‚ÄëZahlung:<input id="input-expenses-bank" type="number" readonly></label>
      </section>
      <section><h2>3) Verm√∂genswerte</h2>
        <div class="grid3">
          <div class="label">Ersparnisse:</div><input id="input-asset-savings" type="number" class="full-span">
          <div class="label">Edelmetalle etc.:</div><input id="input-asset-metals" type="number" class="full-span">
          <div class="label">Aktien/Fonds/CDs:</div><input id="input-asset-stocks-qty" type="number"><input id="input-asset-stocks-cost" type="number">
          <div class="label">Immobilien/Unternehmen:</div><input id="input-asset-property-down" type="number"><input id="input-asset-property-cost" type="number">
        </div>
      </section>
      <section><h2>4) Verbindlichkeiten</h2>
        <div class="grid4">
          <div class="label">Eigenheim‚ÄëHypothek:</div>
          <div class="liability-control">
            <input id="input-liability-mortgage" type="number" readonly>
            <button id="btn-pay-mortgage">Abzahlen</button>
          </div>
          <div class="label">BAf√∂G Darlehen:</div>
          <div class="liability-control">
            <input id="input-liability-bafog" type="number" readonly>
            <button id="btn-pay-bafog">Abzahlen</button>
          </div>
          <div class="label">Autokredit:</div>
          <div class="liability-control">
            <input id="input-liability-autoloan" type="number" readonly>
            <button id="btn-pay-autoloan">Abzahlen</button>
          </div>          <div class="label">Kreditkartenschulden:</div>
          <div class="liability-control">
            <input id="input-liability-cc" type="number" readonly>
            <button id="btn-pay-cc">Abzahlen</button>
          </div>
          <div class="label">Bankkredit:</div>
          <div class="liability-control bank-loan-control">
            <input id="input-liability-bank" type="number" readonly>
            <div class="bank-controls">
              <button id="btn-pay-bank-1000">-1000</button>
              <button id="btn-take-bank-1000">+1000</button>
            </div>
          </div>
        </div>
      </section>
    </div>
    <div class="sheet bargeldkonto">
      <h2>Bargeldkonto¬†‚Äì¬†<span id="job-display"></span></h2>
      <div class="summary">
        <label>Gehalt:<span id="sum-salary">0¬†‚Ç¨</span></label>
        <label>Passives Einkommen:<span id="sum-passive">0¬†‚Ç¨</span></label>
        <label>Gesamtes Einkommen:<span id="sum-total-income">0¬†‚Ç¨</span></label>
        <label>Gesamte Ausgaben:<span id="sum-total-expenses">0¬†‚Ç¨</span></label>
        <label>Cashflow:<span id="sum-cashflow">0¬†‚Ç¨</span></label>
      </div>
      <div class="balance">Aktueller Kontostand: <span id="current-balance">0,00</span>¬†‚Ç¨</div>
      <ul id="entries"></ul>
    </div>
  </div>  <script>
    const profilesData = {
      "debug-anwalt": { bal: [50000, 100000], inc: 7500, exp: 5100, ob: [[115000,1100],[78000,300],[11000,200],[7000,200],[0,0]], taxes:3300 },
      anwalt: { bal: [2000, 2400], inc: 7500, exp: 5100, ob: [[115000,1100],[78000,300],[11000,200],[7000,200],[0,0]], taxes:3300 },
      arzt: { bal: [3500, 4900], inc: 13200, exp: 8300, ob: [[202000,1900],[150000,700],[19000,300],[10000,200],[0,0]], taxes:5700 },
      hausmeister: { bal: [600, 600], inc: 1600, exp: 1000, ob: [[20000,200],[0,0],[4000,100],[3000,100],[0,0]], taxes:600 },
      ingenieur: { bal: [400, 1700], inc: 4900, exp: 3200, ob: [[75000,700],[12000,100],[7000,200],[5000,200],[0,0]], taxes:2000 },
      krankenschwester: { bal: [500, 1100], inc: 3100, exp: 2000, ob: [[47000,400],[6000,100],[5000,100],[4000,200],[0,0]], taxes:1200 },
      lehrer: { bal: [400, 1200], inc: 3300, exp: 2100, ob: [[50000,500],[12000,100],[5000,100],[4000,200],[0,0]], taxes:1200 },
      "lkw-fahrer": { bal: [800, 800], inc: 2500, exp: 1700, ob: [[38000,400],[0,0],[4000,100],[3000,100],[0,0]], taxes:1100 },
      manager: { bal: [400, 1600], inc: 4600, exp: 3000, ob: [[75000,700],[12000,100],[6000,100],[4000,200],[0,0]], taxes:1900 },
      mechaniker: { bal: [700, 700], inc: 2000, exp: 1300, ob: [[31000,300],[0,0],[3000,100],[3000,100],[0,0]], taxes:900 },
      pilot: { bal: [2500, 3500], inc: 9500, exp: 6000, ob: [[90000,1000],[0,0],[15000,300],[22000,700],[0,0]], taxes:4000 },
      polizist: { bal: [500, 1100], inc: 3000, exp: 1900, ob: [[46000,400],[0,0],[5000,100],[3000,100],[0,0]], taxes:300 },
      sekretaer: { bal: [700, 800], inc: 2500, exp: 1700, ob: [[38000,400],[0,0],[4000,100],[3000,100],[0,0]], taxes:100 }
    };
    let balanceArray = [], baseIncome = 0, baseExpenses = 0, obligations = [];
    let initialBalance = 0, runningBalance = 0;
    const sel = document.getElementById('profile-selector');

    function generateArray() {
      const arr = [];
      let j = 0;
      while (j < balanceArray.length || arr.length % 2 === 0) {
        let i = arr.length;
        if (i < balanceArray.length) {
          arr.push(balanceArray[i]); j++;
        } else if (i % 2 === 0) {
          arr.push(arr[i-1] + arr[i-2]);
        } else {
          arr.push(balanceArray[j]); j++;
        }
      }
      return arr;
    }    function renderBaseEntries() {
      const ul = document.getElementById('entries');
      ul.innerHTML = '';
      const arr = generateArray();
      // Erstes Element (der alte Kontostand) √ºberspringen, und den letzten Wert als initialBalance verwenden
      initialBalance = arr.length > 1 ? arr[arr.length - 1] : 0;
      runningBalance = initialBalance;        // Schleife beginnt bei Index 1, um den ersten Wert zu √ºberspringen
      for (let i = 1; i < arr.length; i++) {
        const num = arr[i];
        const li = document.createElement('li');
        const inp = document.createElement('input');
        // Input als Text statt als Zahl anzeigen, um das Vorzeichen hinzuzuf√ºgen
        inp.type = 'text';
        inp.readOnly = true;
        // Vorzeichen f√ºr den Wert hinzuf√ºgen (+ oder -)
        inp.value = (num >= 0 ? '+' : '-') + Math.abs(num);
        
        // Rote Farbe f√ºr negative Werte
        if (num < 0) {
          inp.style.color = 'var(--danger)';
        }
        
        li.append(inp);
        ul.append(li);
      }
      
      // Display-Aktualisierung und ein neues leeres Eingabefeld f√ºr weitere Eintr√§ge
      updateDisplayBalance();
      addEntry();
    }

    function addEntry() {
      const ul = document.getElementById('entries');
      const li = document.createElement('li');
      const inp = document.createElement('input');
      inp.type = 'number'; inp.placeholder = '‚Ç¨';
      inp.addEventListener('keydown', e => {
        if (e.key === 'Enter') { e.preventDefault(); finalizeEntry(inp); }
      });
      li.append(inp); ul.append(li); inp.focus();
    }    function finalizeEntry(inp) {
      const val = parseFloat(inp.value) || 0;
      runningBalance += val;
      inp.readOnly = true; 
      inp.type = 'text'; 
      inp.value = (val >= 0 ? '+' : '') + Math.abs(val);
      
      const sumLi = document.createElement('li');
      const sumInp = document.createElement('input');      sumInp.type = 'text'; 
      sumInp.readOnly = true;
      // Vorzeichen f√ºr Kontostand hinzuf√ºgen
      sumInp.value = (runningBalance >= 0 ? '+' : '-') + Math.abs(runningBalance);
      sumInp.style.background = '#eee';
      
      // Rote Farbe f√ºr negative Kontost√§nde
      if (runningBalance < 0) {
        sumInp.style.color = 'var(--danger)';
      }
      
      sumLi.append(sumInp);
      inp.parentNode.after(sumLi);
      
      updateDisplayBalance();
      addEntry();    }    function updateDisplayBalance() {
      // Vorzeichen f√ºr aktuellen Kontostand immer anzeigen
      const prefix = runningBalance >= 0 ? '+' : '-';
      const currentBalanceEl = document.getElementById('current-balance');
      
      // Text mit Vorzeichen setzen
      currentBalanceEl.textContent = prefix + Math.abs(runningBalance).toFixed(2).replace('.', ',');
      
      // Farbe anpassen - rot bei negativen Werten
      currentBalanceEl.style.color = runningBalance < 0 ? 'var(--danger)' : 'inherit';
      
      updatePayButtonStates();
    }function updateSummary() {
      const salary = baseIncome;
      const passive = (+document.getElementById('input-income-interest').value || 0) + (+document.getElementById('input-income-property').value || 0);
      const totalInc = salary + passive;
      const totalExp =
        (+document.getElementById('input-expenses-taxes').value || 0) +
        (+document.getElementById('input-expenses-mortgage').value || 0) +
        (+document.getElementById('input-expenses-bafog').value || 0) +
        (+document.getElementById('input-expenses-autoloan').value || 0) +
        (+document.getElementById('input-expenses-cc').value || 0) +
        (+document.getElementById('input-expenses-bank').value || 0);
      document.getElementById('sum-salary').textContent = salary + ' ‚Ç¨';
      document.getElementById('sum-passive').textContent = passive + ' ‚Ç¨';
      document.getElementById('sum-total-income').textContent = totalInc + ' ‚Ç¨';
      document.getElementById('sum-total-expenses').textContent = totalExp + ' ‚Ç¨';
      document.getElementById('sum-cashflow').textContent = (totalInc - totalExp) + ' ‚Ç¨';
    }function setupPayButtons() {
      ['mortgage','bafog','autoloan','cc'].forEach(type => {
        const btn = document.getElementById(`btn-pay-${type}`);
        btn.addEventListener('click', () => {
          const liInput = document.getElementById(`input-liability-${type}`);
          const expInput = document.getElementById(`input-expenses-${type}`);
          const amount = parseFloat(liInput.value) || 0;
          if (runningBalance >= amount && amount > 0) {
            runningBalance -= amount;
            liInput.value = 0;
            expInput.value = 0;
            btn.disabled = true;
            updateDisplayBalance();
            updateSummary();
          }
        });
      });
    }
      function updatePayButtonStates() {
      ['mortgage','bafog','autoloan','cc'].forEach(type => {
        const btn = document.getElementById(`btn-pay-${type}`);
        const liInput = document.getElementById(`input-liability-${type}`);
        const amount = parseFloat(liInput.value) || 0;
        
        // Deaktiviere Knopf wenn Verbindlichkeit 0 ist oder nicht genug Guthaben vorhanden
        btn.disabled = amount <= 0 || runningBalance < amount;
        
        // Visuelles Feedback zum Knopfstatus
        if (btn.disabled) {
          btn.classList.add('btn-disabled');
          btn.title = amount <= 0 ? 'Keine Verbindlichkeit' : 'Nicht gen√ºgend Guthaben';
        } else {
          btn.classList.remove('btn-disabled');
          btn.title = 'Verbindlichkeit vollst√§ndig abzahlen';
        }
      });
      
      // Bankkredit-Knopf zum Abbezahlen
      const btnPayBank = document.getElementById('btn-pay-bank-1000');
      const bankInput = document.getElementById('input-liability-bank');
      const bankAmount = parseFloat(bankInput.value) || 0;
      
      btnPayBank.disabled = bankAmount < 1000 || runningBalance < 1000;
      if (btnPayBank.disabled) {
        btnPayBank.classList.add('btn-disabled');
        btnPayBank.title = bankAmount < 1000 ? 'Kredit zu niedrig f√ºr Teilzahlung' : 'Nicht gen√ºgend Guthaben';
      } else {
        btnPayBank.classList.remove('btn-disabled');
        btnPayBank.title = '1000 ‚Ç¨ vom Bankkredit abzahlen';
      }
    }function loadData(profile) {
      const data = profilesData[profile] || profilesData['anwalt'];
      balanceArray = data.bal;
      baseIncome = data.inc;
      baseExpenses = data.exp;
      obligations = data.ob;
      document.getElementById('input-income-salary').value = baseIncome;
      document.getElementById('input-income-interest').value = 0;
      document.getElementById('input-income-property').value = 0;
      document.getElementById('input-expenses-taxes').value = data.taxes;
      document.getElementById('input-expenses-mortgage').value = obligations[0][1];
      document.getElementById('input-expenses-bafog').value = obligations[1][1];
      document.getElementById('input-expenses-autoloan').value = obligations[2][1];
      document.getElementById('input-expenses-cc').value = obligations[3][1];
      
      // Bankkredit-Zinszahlung (10% der Schulden)
      const bankLoanAmount = obligations[4][0];
      const bankLoanPayment = Math.round(bankLoanAmount * 0.1);
      document.getElementById('input-expenses-bank').value = bankLoanPayment;
      
      // Verbindlichkeiten ausf√ºllen (erster Wert aus jedem ob-Tupel)
      document.getElementById('input-liability-mortgage').value = obligations[0][0];
      document.getElementById('input-liability-bafog').value = obligations[1][0];
      document.getElementById('input-liability-autoloan').value = obligations[2][0];
      document.getElementById('input-liability-cc').value = obligations[3][0];
      document.getElementById('input-liability-bank').value = bankLoanAmount;
      
      document.getElementById('job-display').textContent = sel.options[sel.selectedIndex].text;
      ['input-income-interest','input-income-property'].forEach(id =>
        document.getElementById(id).addEventListener('input', updateSummary)
      );
      updateSummary();
      renderBaseEntries();
      updatePayButtonStates();
    }    document.addEventListener('DOMContentLoaded', () => {
      sel.addEventListener('change', () => loadData(sel.value));
      loadData(sel.value);
      // addEntry() wird nicht mehr hier aufgerufen, da es bereits in renderBaseEntries() aufgerufen wird
      setupPayButtons();
      setupBankLoanButtons();
    });
    
    function setupBankLoanButtons() {
      // Knopf zum Abbezahlen von 1000 Euro
      document.getElementById('btn-pay-bank-1000').addEventListener('click', () => {
        const loanInput = document.getElementById('input-liability-bank');
        const loanAmount = parseFloat(loanInput.value) || 0;
        
        if (loanAmount >= 1000 && runningBalance >= 1000) {
          // Kredit um 1000 reduzieren
          const newLoanAmount = loanAmount - 1000;
          loanInput.value = newLoanAmount;
          
          // Kontostand anpassen
          runningBalance -= 1000;
          
          // Zinszahlung anpassen (10% des neuen Betrags)
          const newPayment = Math.round(newLoanAmount * 0.1);
          document.getElementById('input-expenses-bank').value = newPayment;
          
          // Oberfl√§che aktualisieren
          updateDisplayBalance();
          updateSummary();
          updatePayButtonStates();
        }
      });
      
      // Knopf zum Aufnehmen von 1000 Euro
      document.getElementById('btn-take-bank-1000').addEventListener('click', () => {
        const loanInput = document.getElementById('input-liability-bank');
        const loanAmount = parseFloat(loanInput.value) || 0;
        
        // Kredit um 1000 erh√∂hen
        const newLoanAmount = loanAmount + 1000;
        loanInput.value = newLoanAmount;
        
        // Kontostand anpassen
        runningBalance += 1000;
        
        // Zinszahlung anpassen (10% des neuen Betrags)
        const newPayment = Math.round(newLoanAmount * 0.1);
        document.getElementById('input-expenses-bank').value = newPayment;
        
        // Oberfl√§che aktualisieren
        updateDisplayBalance();
        updateSummary();
      });
    }
  </script>
</body>
</html>
``` 
