<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Digitales Cashflow‑Tool</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="mobile-handle" id="mobile-handle"></div>
  <div class="profile-selector-container">
    <div class="profile-selection">
      <label for="profile-selector">Profil:</label>
      <select id="profile-selector">
        <option value="debug-anwalt">🐞 Debug Anwalt</option>
        <option value="anwalt">⚖️ Anwalt</option>
        <option value="arzt">🩺 Arzt</option>
        <option value="hausmeister">🏠 Hausmeister</option>
        <option value="ingenieur">👷 Ingenieur</option>
        <option value="krankenschwester">🏥 Krankenschwester</option>
        <option value="lehrer">📚 Lehrer</option>
        <option value="lkw-fahrer">🚚 LKW‑Fahrer</option>
        <option value="manager">💼 Manager</option>
        <option value="mechaniker">🔧 Mechaniker</option>
        <option value="pilot">✈️ Pilot</option>
        <option value="polizist">👮 Polizist</option>
        <option value="sekretaer">🗂️ Sekretär</option>
      </select>
  <button id="theme-toggle" class="theme-toggle" aria-label="Theme umschalten" title="Hell/Dunkel umschalten">🌙</button>
    </div>
  </div>  
  
  <!-- Popup für Edelmetalle Kauf -->
  <div id="metals-popup" class="popup-overlay">
    <div class="popup-content">
      <h3>Edelmetalle kaufen</h3>
      <div class="popup-grid">
        <label>Kaufart:</label>
        <select id="metals-buy-type">
          <option value="total">Gesamtpreis</option>
          <option value="per-coin">Preis pro Münze</option>
        </select>
        
        <label>Anzahl Münzen:</label>
        <input id="metals-coins" type="number" min="1" value="1">
        
        <label>Preis:</label>
        <input id="metals-price" type="number" min="0" value="0">
          <div id="metals-total-container" style="display: none">
          <label>Gesamtpreis:</label>
          <span id="metals-total-price">0 €</span>
        </div>
      </div>
      
      <div class="popup-buttons">
        <button id="metals-buy-confirm">Kaufen</button>
        <button id="metals-buy-cancel">Abbrechen</button>
      </div>
    </div>
  </div>
  
  <!-- Popup für Edelmetalle Verkauf -->  <div id="metals-sell-popup" class="popup-overlay">
    <div class="popup-content">
      <h3>Edelmetalle verkaufen</h3>
      <div class="popup-grid">
        <label>Verkaufsart:</label>
        <select id="metals-sell-type">
          <option value="total">Gesamtpreis</option>
          <option value="per-coin">Preis pro Münze</option>
        </select>
        
        <label>Anzahl Münzen:</label>
        <input id="metals-sell-coins" type="number" min="1" value="1">
        
        <label>Preis:</label>
        <input id="metals-sell-price" type="number" min="0" value="0">
        
        <div id="metals-sell-total-container" style="display: none">
          <label>Gesamterlös:</label>
          <span id="metals-sell-total-price">0 €</span>
        </div>
        
        <label>Verfügbare Münzen:</label>
        <span id="metals-available">0</span>
      </div>
      
      <div class="popup-buttons">
        <button id="metals-sell-confirm">Verkaufen</button>
        <button id="metals-sell-cancel">Abbrechen</button>
      </div>
    </div>
  </div>
    <!-- Popup für Aktien Kauf -->
  <div id="stocks-popup" class="popup-overlay">
    <div class="popup-content">
      <h3>Aktien kaufen</h3>
      <div class="popup-grid">
        <label>Name:</label>
        <input id="stocks-name" type="text" value="" placeholder="Name der Aktie">
        
        <label>Anzahl Aktien:</label>
        <input id="stocks-shares" type="number" min="1" value="1">
        
        <label>Preis:</label>
        <input id="stocks-price" type="number" min="0" value="0">
          <div id="stocks-total-container" style="display: contents">
            <label>Gesamtpreis:</label>
          <span id="stocks-total-price">0 €</span>
        </div>
      </div>
      
      <div class="popup-buttons">
        <button id="stocks-buy-confirm">Kaufen</button>
        <button id="stocks-buy-cancel">Abbrechen</button>
      </div>
    </div>
  </div>    <!-- Popup für Aktien Verkauf -->  <div id="stocks-sell-popup" class="popup-overlay">
    <div class="popup-content">
      <h3>Aktien verkaufen</h3>
      <div class="popup-grid">
        <label>Name:</label>
        <select id="stocks-sell-name">
          <!-- Options will be populated dynamically -->
        </select>
        
        <label>Anzahl Aktien:</label>
        <input id="stocks-sell-shares" type="number" min="1" value="1">
        
        <label>Preis:</label>
        <input id="stocks-sell-price" type="number" min="0" value="0">
        
        <div id="stocks-sell-total-container" style="display: none">
          <label>Gesamterlös:</label>
          <span id="stocks-sell-total-price">0 €</span>
        </div>
        
        <label>Verfügbare Aktien:</label>
        <span id="stocks-available">0</span>
      </div>
        <div class="popup-buttons">
        <button id="stocks-sell-confirm">Verkaufen</button>
        <button id="stocks-sell-cancel">Abbrechen</button>
      </div>
    </div>
  </div>
  
  <!-- Popup für Aktien Event (Split/Rückwärtssplit) -->
  <div id="stocks-event-popup" class="popup-overlay">
    <div class="popup-content">
      <h3>Aktien Event</h3>
      <div class="popup-grid">
        <label>Aktie:</label>
        <select id="stocks-event-name">
          <!-- Options will be populated dynamically -->
        </select>
        
        <label>Event-Art:</label>
        <select id="stocks-event-type">
          <option value="split">Split (x2)</option>
          <option value="reverse-split">Rückwärtssplit (÷2)</option>
        </select>
        
        <label>Aktuelle Anzahl:</label>
        <span id="stocks-event-current">0</span>
        
        <label>Neue Anzahl:</label>
        <span id="stocks-event-new">0</span>
      </div>
      
      <div class="popup-buttons">
        <button id="stocks-event-confirm">Durchführen</button>
        <button id="stocks-event-cancel">Abbrechen</button>
      </div>
    </div>
  </div>
  <!-- Popup für Unternehmen Kauf -->
  <div id="business-popup" class="popup-overlay">
    <div class="popup-content">
      <h3>Unternehmen kaufen</h3>
      <div class="popup-grid">
        <label>Name:</label>
        <input id="business-name" type="text" value="" placeholder="Name des Unternehmens">
        
        <label>Kaufpreis:</label>
        <input id="business-price" type="number" min="0" value="0" placeholder="Preis in €">
        
        <label>Monatlicher Cashflow:</label>
        <input id="business-cashflow" type="number" value="0" placeholder="Monatlicher Gewinn in €">
      </div>
      
      <div class="popup-buttons">
        <button id="business-buy-confirm">Kaufen</button>
        <button id="business-buy-cancel">Abbrechen</button>
      </div>
    </div>
  </div>
    <!-- Popup für Unternehmen Verkauf -->
  <div id="business-sell-popup" class="popup-overlay">
    <div class="popup-content">
      <h3>Unternehmen verkaufen</h3>
      <div class="popup-grid">
        <label>Name:</label>
        <select id="business-sell-name">
          <!-- Options will be populated dynamically -->
        </select>
        
        <label>Verkaufspreis:</label>
        <input id="business-sell-price" type="number" min="0" value="0">
        
        <label>Monatlicher Cashflow:</label>
        <span id="business-current-cashflow">0 €</span>
      </div>
      
      <div class="popup-buttons">
        <button id="business-sell-confirm">Verkaufen</button>
        <button id="business-sell-cancel">Abbrechen</button>
      </div>
    </div>  </div>
  
  <!-- Popup für Unternehmen Cashflow bearbeiten -->
  <div id="business-cashflow-edit-popup" class="popup-overlay">
    <div class="popup-content">
      <h3>Cashflow bearbeiten</h3>
      <div class="popup-grid">
        <label>Unternehmen:</label>
        <span id="business-edit-name">-</span>
        
        <label>Aktueller Cashflow:</label>
        <span id="business-edit-current-cashflow">0 €</span>
        
        <label>Neuer Cashflow:</label>
        <input id="business-edit-cashflow" type="number" value="0" placeholder="Monatlicher Cashflow in €">
      </div>
      
      <div class="popup-buttons">
        <button id="business-edit-confirm">Speichern</button>
        <button id="business-edit-cancel">Abbrechen</button>
      </div>
    </div>
  </div>
  
  <!-- Popup für Immobilien Kauf -->
  <div id="property-popup" class="popup-overlay">
    <div class="popup-content">
      <h3>Immobilie kaufen</h3>
      <div class="popup-grid">
        <label>Typ:</label>
        <select id="property-type">
          <option value="efh">Einfamilienhaus (EFH)</option>
          <option value="dp">Doppelhaus (DP)</option>
          <option value="mfh">Mehrfamilienhaus (MFH)</option>
          <option value="etw">Eigentumswohnung (ETW)</option>
          <option value="ah">Appartmenthaus (AH)</option>
        </select>
        
        <div id="property-units-container" style="display: none">
          <label>Anzahl Wohneinheiten:</label>
          <input id="property-units" type="number" min="1" value="1" placeholder="Anzahl Wohnungen">
        </div>
        
        <label>Eigenanteil:</label>
        <input id="property-down" type="number" min="0" value="0" placeholder="Anzahlung in €">
        
        <label>Kaufpreis:</label>
        <input id="property-price" type="number" min="0" value="0" placeholder="Gesamtpreis in €">
        
        <label>Monatlicher Cashflow:</label>
        <input id="property-cashflow" type="number" value="0" placeholder="Monatlicher Gewinn in €">
      </div>
      
      <div class="popup-buttons">
        <button id="property-buy-confirm">Kaufen</button>
        <button id="property-buy-cancel">Abbrechen</button>
      </div>
    </div>
  </div>
    <!-- Popup für Immobilien Verkauf -->
  <div id="property-sell-popup" class="popup-overlay">
    <div class="popup-content">
      <h3>Immobilie verkaufen</h3>
      <div class="popup-grid">
        <label>Immobilie:</label>
        <select id="property-sell-name">
          <!-- Options will be populated dynamically -->
        </select>
        
        <label>Verkaufsmodus:</label>
        <select id="property-sell-mode">
          <option value="total">Gesamtpreis</option>
          <option value="per-unit">Preis pro Wohneinheit</option>
          <option value="original-fixed">Ursprungspreis + Festwert</option>
          <option value="original-percent">Ursprungspreis + X Prozent</option>
        </select>
        
        <label>Verkaufspreis:</label>
        <input id="property-sell-price" type="number" min="0" value="0">
        
        <div id="property-sell-total-container" style="display: none">
          <label>Gesamtverkaufspreis:</label>
          <span id="property-sell-total-price">0 €</span>
        </div>
        
        <label>Gewinnvoransicht:</label>
        <span id="property-profit-preview">0 €</span>
        
        <label>Eigenanteil:</label>
        <span id="property-current-down">0 €</span>
        
        <label>Kaufpreis:</label>
        <span id="property-current-price">0 €</span>
        
        <label>Wohneinheiten:</label>
        <span id="property-current-units">1</span>
        
        <label>Monatlicher Cashflow:</label>
        <span id="property-current-cashflow">0 €</span>
      </div>
      
      <div class="popup-buttons">
        <button id="property-sell-confirm">Verkaufen</button>
        <button id="property-sell-cancel">Abbrechen</button>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="sheet">      <section>        <h2>1) Einkommen</h2>        <div class="grid6">
          <div class="label">Gehalt:</div>
          <input id="input-income-salary" type="text" readonly>
          <div class="label">Immobilien:</div>
          <input id="input-income-property" type="text" readonly>
          <div class="label">Unternehmen:</div>
          <input id="input-income-business" type="text" readonly>
        </div>
      </section>
      <section>        <h2>2) Ausgaben</h2>
        <div class="grid4">
          <div class="label">Steuern:</div>
          <input id="input-expenses-taxes" type="text" readonly>
          <div class="label">Eigenheim‑Hypothek:</div>
          <input id="input-expenses-mortgage" type="text" readonly>
          <div class="label">BAföG Darlehenszahlung:</div>
          <input id="input-expenses-bafog" type="text" readonly>
          <div class="label">Autokredit‑Zahlung:</div>
          <input id="input-expenses-autoloan" type="text" readonly>
          <div class="label">Kreditkarten‑Zahlung:</div>
          <input id="input-expenses-cc" type="text" readonly>
          <div class="label">Kinder:</div>
          <div class="children-control">
            <input id="input-children-count" type="number" min="0" value="0" aria-label="Kinder Anzahl">
            <input id="input-expenses-children" type="text" readonly aria-label="Kinder Kosten">
          </div>
          <div class="label">Bankkredit‑Zahlung:</div>
          <input id="input-expenses-bank" type="text" readonly>
        </div>
      </section>
      <section>
        <h2>3) Vermögenswerte</h2>
        <div class="grid3">          <div class="label">Edelmetalle etc.:</div>
          <div class="asset-control">
            <input id="input-asset-metals" type="number" readonly class="full-span" placeholder="Goldmünzen">
            <button id="btn-buy-metals">Kaufen</button>
            <button id="btn-sell-metals" disabled>Verkaufen</button>
          </div>          <div class="label">Aktien/Fonds/CDs:</div>
          <div class="asset-control">
            <!-- Asset-Liste wird hier dynamisch eingefügt -->
            <div id="stocks-assets-list" class="asset-list"></div>
            <button id="btn-buy-stocks">Kaufen</button>
            <button id="btn-sell-stocks" disabled>Verkaufen</button>
            <button id="btn-stocks-event" disabled>Event</button>
          </div><div class="label">Immobilien:</div>
          <div class="asset-control">
            <div id="property-assets-list" class="asset-list"></div>
            <input id="input-asset-property-down" type="number" readonly style="display: none;">
            <input id="input-asset-property-cost" type="number" readonly style="display: none;">
            <button id="btn-buy-property">Kaufen</button>
            <button id="btn-sell-property" disabled>Verkaufen</button>
          </div>
          <div class="label">Unternehmen:</div>
          <div class="asset-control">
            <div id="business-assets-list" class="asset-list"></div>
            <button id="btn-buy-business">Kaufen</button>
            <button id="btn-sell-business" disabled>Verkaufen</button>
          </div>
        </div>
      </section>
      <section>        <h2>4) Verbindlichkeiten</h2>
        <div class="grid4">
          <div class="label">Eigenheim‑Hypothek:</div>
          <div class="liability-control">
            <input id="input-liability-mortgage" type="text" readonly>
            <button id="btn-pay-mortgage">Abzahlen</button>
          </div>
          <div class="label">BAföG Darlehen:</div>
          <div class="liability-control">
            <input id="input-liability-bafog" type="text" readonly>
            <button id="btn-pay-bafog">Abzahlen</button>
          </div>
          <div class="label">Autokredit:</div>
          <div class="liability-control">
            <input id="input-liability-autoloan" type="text" readonly>
            <button id="btn-pay-autoloan">Abzahlen</button>
          </div>
          <div class="label">Kreditkartenschulden:</div>
          <div class="liability-control">
            <input id="input-liability-cc" type="text" readonly>
            <button id="btn-pay-cc">Abzahlen</button>
          </div>
          <div class="label">Bankkredit:</div>
          <div class="liability-control bank-loan-control">
            <input id="input-liability-bank" type="text" readonly>
            <div class="bank-controls">
              <button id="btn-pay-bank-1000">-1000</button>
              <button id="btn-take-bank-1000">+1000</button>
            </div>
          </div>
        </div>
      </section>
    </div>    <div class="sheet bargeldkonto">
      <h2>Bargeldkonto – <span id="job-display"></span></h2>
      <div class="dream-container">
        <label for="dream-input">Traum:</label>
        <input id="dream-input" type="text" placeholder="Beschreibe deinen Traum...">
      </div>
      <div class="summary">
        <label>Gehalt:<span id="sum-salary">0 €</span></label>
        <label>Passives Einkommen:<span id="sum-passive">0 €</span></label>
        <label>Gesamtes Einkommen:<span id="sum-total-income">0 €</span></label>
        <label>Gesamte Ausgaben:<span id="sum-total-expenses">0 €</span></label>
        <label>Cashflow:<span id="sum-cashflow">0 €</span></label>
      </div>
      <div class="freedom-progress" aria-label="Fortschritt finanzielle Freiheit">
        <div class="freedom-header">
          <span>Finanzielle Freiheit</span>
          <span id="freedom-percent">0%</span>
        </div>
        <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
          <div id="freedom-bar"></div>
        </div>
        <div class="freedom-stats">
          <span>Passiv: <strong id="freedom-passive">0 €</strong></span>
          <span>Ausgaben: <strong id="freedom-expenses">0 €</strong></span>
        </div>
      </div>
      <div class="balance-container">
  <button id="btn-job-loss" class="job-loss-btn" title="Einmal alle aktuellen Ausgaben verlieren">Job verloren</button>
  <button id="btn-donate" class="add-cashflow-btn" title="10% vom Gesamteinkommen spenden">Spenden</button>
  <div class="balance">Aktueller Kontostand: <span id="current-balance">0</span> €</div>
  <button id="btn-add-cashflow" class="add-cashflow-btn">Add Cashflow</button>
  <button id="btn-multi-lvl" class="multi-lvl-btn" title="+500 € Bonus erhalten">Multi Lvl</button>
      </div>
      <ul id="entries"></ul>
    </div>  </div>

  <!-- Congratulations Popup -->
  <div id="congratulations-popup" class="popup-overlay">
    <div class="popup-content">
      <h2 class="congratulations-title">🎉 Herzlichen Glückwunsch! 🎉</h2>
      <p class="congratulations-message">
        Du hast finanzielle Freiheit erreicht! Dein passives Einkommen übersteigt deine Gesamtausgaben.
      </p>
      <div class="achievement-stats">
        <div class="stat-row">
          <span>Passives Einkommen:</span>
          <span class="stat-value" id="congrats-passive-income">0 €</span>
        </div>
        <div class="stat-row">
          <span>Gesamte Ausgaben:</span>
          <span class="stat-value" id="congrats-total-expenses">0 €</span>
        </div>
        <div class="stat-row">
          <span>Überschuss:</span>
          <span class="stat-value" id="congrats-surplus">0 €</span>
        </div>
      </div>
      <p class="congratulations-message">
        Du kannst jetzt von deinen passiven Einkünften leben, ohne arbeiten zu müssen!
      </p>
      <button id="congratulations-close">Schließen</button>
    </div>
  </div>
  <!-- Load JavaScript modules -->
  <script src="js/core.js"></script>
  <script src="js/bankloan.js"></script>
  <script src="js/metals.js"></script>
  <script src="js/metals-init.js"></script>
  <script src="js/stocks.js"></script>
  <script src="js/business.js"></script>
  <script src="js/property.js"></script>
  <script src="js/ui-utils.js"></script>
  <script src="js/congratulations.js"></script>
  <div id="toast-container" aria-live="polite" aria-atomic="true"></div>
</body>

</html>
